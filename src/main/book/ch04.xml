<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:ns5="http://www.w3.org/2000/svg"
         xmlns:ns4="http://www.w3.org/1998/Math/MathML"
         xmlns:ns3="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
	<title>TestLink Configuration</title>
	
	<section>

		<title>Installing TestLink</title>
	
		<para>The first part of the integration configuration is install and 
		configure TestLink. Start by downloading testlink-1.9.2.tar.gz from 
		http://www.teamst.org. Descompact it using tar -zxvf testlink-1.9.2.tar.gz. 
		It will extract TestLink's files to your current folder. Move this directory 
		to your http server (e.g.: Apache) root directory and open 
		http://localhost/testlink-1.9.2 from your browser.</para>
		
		<!-- Tip: you can use the same commands for Postgre SQL or MS SQL, just 
		check the vendor's manual to understand what are the equivalent commands 
		available. -->
		
		<para>Now the installation wizard will guide you through the rest of the 
		installation. You will need a database and two accounts created in MySQL 
		before moving on. To create a database for Testlink execute the following 
		command in MySQL prompt.</para>
		
		<para>mysql> create database testlink192;</para>
		
		<para>Now create the user that TestLink will use to access this database.</para>
		
		<para>mysql> grant all privileges on testlink192.* to 'testlink192' identified by 'testlink192';</para>
		<para>mysql> flush privileges;</para>
		
		<para>Now follow the instructions in TestLink installation wizard and when 
		asked use the information you just created in MySQL. For this example we 
		are assuming you have access to the MySQL server and know what are the admin 
		account and password.</para>
		
		<para>If everything worked out correctly you should be asked to log in 
		using admin:admin (user:password).</para>
		
		<para>TestLink contains a configuration file that you 
		need to change before going to the next section. 
		In $TESTLINK_HOME/config.inc.php, find $tlCfg->api->enabled and 
		set its value to TRUE. Then look for $g_attachments->order_by and set 
		its value to " ORDER BY id ASC " (leave the blank spaces before 
		and after the order by clause). The first configuration enables the 
		XML-RPC API for external access, and the latter changes the column on 
		which TestLink orders attachments. The precision of the date_added  
		column is limited to seconds, so if you insert two attachments at same 
		time the values returned by your database may be inconsistent.</para>
	
	</section>
	
	<section>
		
		<title>Creating a sample Test Project</title>
		
		<para>When you log in by the first time to TestLink it is showed to you 
		a form that lets you create your first Test Project. You can have as 
		many test projects as you want. It is under a test project where you 
		will create test plans, test cases, requirements, custom fields and 
		other entities. Create a test project with name "My first project", 
		prefix "MFP" and make sure the following options are checked: "Enable 
		Requirements feature", "Enable Testing Priority", "Enable Test 
		Automation (API keys)", "Enable Inventory", "Active" and "Public". 
		Click on "Create" to finish. If the following screen is not displayed 
		go back and check to see if you did not miss any of the previous steps.
		</para>
		
	</section>
	
	<section>
	
		<title>Creating and assigning the Custom Field for automation</title>
	
		<para>Click on the "Project" item of the top menu to be redirected to 
		the main screen. Now we will create the custom field used for 
		automation. This information is used by the plug-in to link an 
		automated test case from TestLink to a Test Result of your set of tests.</para>
		
		<para>Click on "Define Custom Fields" under the "Test Project" options 
		box. Now create a custom field using the name "Java class", label 
		"Java class", available for "Test Case", type "string"", enable on 
		"Test Spec Design" and display on test execution "No".</para>
		
		<para>Now we only need to assign this custom field to be used in 
		our test project. Go back to the main screen and click on 
		"Assign Custom Fields", it will take you to a screen with the list of 
		available custom fields. Select the Java class custom field and click 
		on the "Assign" button.</para>
	
	</section>
	
	<section>
	
		<title>Specify your tests</title>
		
		<para>For those who work with tests this part may be really easy. 
		What we are going to do now is create a test suite and one test case. 
		In TestLink you always keep your test cases under a test suite.</para>
		
		<para>Back to the main screen, in the top menu there is the option 
		"Test Specification". Click on this option. The test specification 
		screen is quite simple. On the left you have the navigator, with the 
		settings, filter and the tree of test suites and test cases. Start 
		clicking on your test project to see the test suite operations 
		available.</para>
		
		<para>Create a test suite with any name that you want. This field is 
		not important for our guide. Once created, your test suite will be  
		displayed in the tree on the left. Now click on the test suite in the 
		tree to see the test case operations.</para>
		
		<para>Create a test case with any title or summary. The important 
		information on this screen for the automation are the execution type 
		and the Java class (custom field created in the previous step). In 
		execution type select "Automated" and for Java class fill with the 
		java class name "sample.Tests".</para>
	
	</section>
	
	<section>
	
		<title>The last step: create your test plan and add test cases</title>
	
		<para>This is the last step in the TestLink configuration. However 
		before we start this step, there an important concept in TestLink, 
		the Builds. In TestLink, you create a test plan outlining what and how 
		you are going to test the application under test. Once you have a test 
		plan you can start to add test cases to your test plan, and then 
		execute it. A build in TestLink is the execution of a test plan, and 
		after the test plan was executed you are not allowed to edit the 
		test cases of this test plan (it wouldn't be right to change the scope 
		or exit criteria of a test case after it had been executed).</para>
	
		<para>Go back to the main screen and click on the Test Plan Management 
		option available under the Test Plan box on the right of the scren. 
		Create a test plan with the name "My first test plan", any 
		description and make sure that Active and Public are checked.</para>
	
		<para>In the last box on the right of the screen, click on Add / Remove 
		Test Cases and add the test case that you created to your test plan.</para>
	
		<para>You may create a build or not, this step is optional. The plug-in 
		automatically creates a new build if there is none with the name that 
		you provided in the Jenkins job configuration page. When you go back 
		to your test plan you should see more options available in the Test 
		Plan box and two other boxes: Test Exxecution and Test Plan contents, 
		as well as other options available in the top menu.</para>
		
		<para>We are done with TestLink, now it is time to configure Jenkins.</para>
	
	</section>
	
</chapter>